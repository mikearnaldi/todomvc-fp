(this["webpackJsonptodomvc-fp"]=this["webpackJsonptodomvc-fp"]||[]).push([[0],{137:function(t,n,e){t.exports=e(159)},138:function(t,n,e){},142:function(t,n){},144:function(t,n){},159:function(t,n,e){"use strict";e.r(n);var r=e(7);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));e(138);var c,a,o,i,u,f,s,p=e(0),b=e(26),l=e(1),d=e(8),m=e(27),h=e(4),O=e(11),j=e(42),v=e(2),E=e(16),w=e(17),y=e(18),g=e(3),k="@uri/emitter",L=function(t,n){return function(e){return p.f.fromSource(p.c.managed.chain(p.c.bracket(p.a.accessM((function(r){return p.a.sync((function(){var c=p.f.su.queueUtils(),a=c.next,o=c.ops,i=c.hasCB;return{unsubscribe:(e?r[k].addEventListener(e):r[k].fromEvent)(t)((function(t){return a({_tag:"offer",a:t}),n})),ops:o,hasCB:i}}))})),(function(t){return t.unsubscribe})),(function(t){var n=t.ops,e=t.hasCB;return p.f.su.emitter(n,e)})))}},M=Object(r.a)({},"@uri/document",document),N=p.a.provide(M),x=p.a.accessM(Object(h.flow)((function(t){return t["@uri/document"]}),p.a.pure)),T=Object(r.a)({},"@uri/dom",{createElement:function(t,n){return document.createElement(t,n)}}),B=p.a.provide(T),F=function(t){Object(E.a)(e,t);var n=Object(w.a)(e);function e(t){var r;return Object(v.a)(this,e),(r=n.call(this,"$(".concat(t,") did not return an element."))).name="ElementNotFound",r}return e}(Object(y.a)(Error)),P=function(t){Object(E.a)(e,t);var n=Object(w.a)(e);function e(t){var r;return Object(v.a)(this,e),(r=n.call(this,"Parent of node: ".concat(t," not found."))).name="ParentElementNotFound",r}return e}(Object(y.a)(Error)),A=function(t){return new F(t)},C=(Object(h.flow)(A,p.a.raiseError),function(t){return new P(t.toString())}),R=(Object(h.flow)(C,p.a.raiseError),function(t){return function(n){return d.fromNullable(n.querySelector(t))}}),S=function(t){return Object(l.pipe)(x,p.a.map(R(t)),p.a.chain(p.a.fromOption(Object(h.constant)(A(t)))))},U=function(t){return d.fromNullable(t.parentElement)},q=function(t){Object(E.a)(e,t);var n=Object(w.a)(e);function e(t){var r;return Object(v.a)(this,e),(r=n.call(this,t)).name="EmptyOptionOfElement",r}return e}(Object(y.a)(Error)),D=(c="click",e(35)),H=Object(r.a)({},"@uri/fetch",{fetch:window.fetch.bind(window)}),z=p.a.provide(H),I=function(t){Object(E.a)(e,t);var n=Object(w.a)(e);function e(t){var r;return Object(v.a)(this,e),(r=n.call(this,"Unable to fetch: ".concat(t))).name="FetchFailed",r}return e}(Object(y.a)(Error)),J=function(t){return function(t){return new I("Fetching data from ")}},W=O.e({id:O.c,userId:O.c,title:O.d,completed:O.b},"Todo"),$=O.a(W),Q=Object(l.pipe)((a="https://jsonplaceholder.typicode.com/todos",p.a.accessM((function(t){return p.a.async((function(n){try{t["@uri/fetch"].fetch(a,o).then((function(t){return t.json()})).then(Object(h.flow)(D.right,n))}catch(e){n(D.left(J("string"===typeof a||a.url)(e)))}return function(t){t(J("string"===typeof a||a.url)(""))}}))}))),p.a.chain((function(t){return p.a.sync((function(){return $.decode(t)}))})),p.a.chain(p.a.fromEither)),V=(i="div",p.a.accessM((function(t){return p.a.pure(t["@uri/dom"].createElement(i,u))}))),Z=Object(l.pipe)(p.d.unboundedQueue(),p.a.zip(p.e.makeRef(f?[f]:[])),p.a.map((function(t){var n=Object(g.a)(t,2),e=n[0],r=n[1];return{next:function(t){return Object(l.pipe)(r.update((function(n){var e=Object(g.a)(n,1)[0];return[t(e)]})),p.a.chain((function(t){var n=Object(g.a)(t,1)[0];return e.offer(n)})))},subscribe:Object(l.pipe)(p.f.fromSource(p.c.pure(Object(l.pipe)(e.take,p.a.map(d.some)))))}}))),_=Object(l.pipe)(V,p.a.chain((function(t){return p.a.sync((function(){return t.innerHTML='<li>\n    <div class="view">\n        <input data-toggle class="toggle" type="checkbox">\n        <label data-edit>Buy a unicorn</label>\n        <button data-remove class="destroy"></button>\n    </div>\n    <input class="edit" value="Rule the web">\n</li>',R("li")(t)}))})),p.a.chain(p.a.fromOption(Object(h.constant)(A("Unable to create DOM element for todo item."))))),G=S(".todo-list"),K=Object(l.pipe)(G,p.a.chain((function(t){return p.a.sync((function(){t.innerHTML=""}))}))),X=function(t){return p.a.zip(Object(l.pipe)(t,m.map((function(t){return Object(l.pipe)(_,p.a.chain(function(t){return function(n){return Object(l.pipe)(Object(j.Do)(d.option).bind("label",R("label")(n)).bind("input",R("input")(n)).return((function(e){var r=e.label,c=e.input;return p.a.sync((function(){return r.innerHTML=t.title,n.setAttribute("data-todo-id",""+t.id),t.completed&&n.classList.add("completed"),c.checked=t.completed,n}))})),p.a.fromOption(Object(h.constant)(Error(""))),p.a.chain(h.identity))}}(t)))})),m.array.sequence(p.a.effect),p.a.chain((function(t){return Object(l.pipe)(S(".todo-list"),p.a.chain((function(n){return p.a.sync((function(){return t.forEach((function(t){return n.appendChild(t)})),n}))})))}))))(K)},Y=Object(l.pipe)(Object(l.pipe)(Z,p.a.chain((function(t){return p.a.parZip(Object(l.pipe)(Q,p.a.chain(Object(h.flow)(h.constant,t.next)),p.a.fork,p.a.chain(Object(h.constant)(Object(l.pipe)(t.subscribe,p.f.map((function(t){return Object(l.pipe)(t,m.takeLeft(10))})),p.f.chain(Object(h.flow)(X,p.f.encaseEffect)),p.f.drain)))),Object(l.pipe)(G,p.f.encaseEffect,p.f.chain(L("click")),p.f.map((function(t){return t.target})),p.f.map(d.fromNullable),p.f.chain(p.f.fromOption),p.f.chain((function(n){var e=n;return e.hasAttribute("data-remove")?Object(l.pipe)(U(e),d.chain((function(t){return U(t)})),p.a.pure,p.a.chain(p.a.fromOption(Object(h.constant)(C(e)))),p.a.map((function(t){return t.getAttribute("data-todo-id")})),p.a.map(d.fromNullable),p.a.chain(p.a.fromOption(Object(h.constant)(C(e)))),p.a.map(Number),p.a.chain((function(n){return t.next((function(t){return t.filter((function(t){return t.id!==n}))}))})),p.f.encaseEffect):p.f.encaseEffect(p.a.pure(Object(h.constVoid)()))})),p.f.drain))}))),p.a.forever),tt=Object(l.pipe)(Y,B,N,z,b.b,p.a.provide((s=document,Object(r.a)({},k,{fromEvent:function(t){return function(n){return s.addEventListener(t,(function(t){return t.stopPropagation(),n(t)})),p.a.sync((function(){return s.removeEventListener(t,n)}))}},addEventListener:function(t){return function(n){return function(e){return t.addEventListener(n,(function(t){return t.stopPropagation(),e(t)})),p.a.sync((function(){return t.removeEventListener(n,e)}))}}}}))),p.a.provide(Object(r.a)({},p.a.AsyncRTURI,{})));p.a.runToPromise(tt).then((function(t){return console.log("Done",t)})).catch((function(t){console.error(t)})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[137,1,2]]]);
//# sourceMappingURL=main.7c96c4b8.chunk.js.map